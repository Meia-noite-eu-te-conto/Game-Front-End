<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>

    <link rel="stylesheet" href="./assets/css/background.css" />

    <link rel="icon" type="image/png" href="/assets/icon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/assets/icon/favicon.svg" />
    <link rel="shortcut icon" href="/assets/icon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/icon/apple-touch-icon.png" />
    <link rel="manifest" href="/assets/icon/site.webmanifest" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script src="./assets/js/Enums.js"></script>
    <script src="./assets/js/utils/CustomError.js"></script>
    <script src="./assets/js/repositories/RoutesInfo.js"></script>
    <script src="/assets/js/Generics.js"></script>
    
    <script src="./assets/js/components/PaginationComponent.js"></script>

    <script src="./assets/js/components/HeaderComponent.js"></script>
    <script src="./assets/js/Header.js"></script>

    <script src="./assets/js/repositories/RoomRepository.js"></script>
    <script src="./assets/js/components/RoomComponent.js"></script>
    <script src="./assets/js/Rooms.js"></script>

</head>
<body class="pbg">

    <!-- Header Section -->
    <section id="header-section" class="cover-container bg-light mb-4 d-flex w-100 px-3 mx-auto flex-column"></section>
    
    <!-- Body Content -->
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
        <main  style="height: 85vh;" class="px-3 d-flex align-items-center justify-content-center flex-column">
            <h1 class="h1 "><b>Trancendence</b></h1>
            <p class="lead">A Pong Game</p>
            <div class="d-flex align-items-around">
                <p class="lead px-3">
                    <a href="./view-rooms.html" class="btn btn-lg btn-secondary">List Rooms</a>
                </p>
                <p class="lead px-3">
                    <button type="button" href="#" class="btn btn-lg btn-dark" data-bs-toggle="modal" data-bs-target="#create-room" data-bs-whatever="@mdo">Create Room</button>
                </p>
            </div>
        </main>
    </div>

    <!-- Form For Create A Room -->
    <div class="modal fade" id="create-room" tabindex="-1" aria-labelledby="createRoomModal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header align-items-start">
                    <div>
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Create a room</h1>
                        <p>create a room to play with up to 4 people</p>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form onsubmit="createRoom(event)"> 
                        <div class="mb-3">
                            <label for="nickname-input" class="col-form-label">Nickname</label>
                            <input type="text" class="form-control" id="nickname-input">
                        </div>
                        <div class="mb-3">
                            <label for="game-type-section" class="col-form-label">Game Type</label>
                            <select id="game-type-section" class="form-select form-select-sm" aria-label="game type selection" onchange="updateNumberOfPlayersOptions()">
                                <option selected>Select a option</option>
                                <option value="0">Match</option>
                                <option value="1">Tournament</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="number-of-players-section" class="col-form-label">Number of Players</label>
                            <select id="number-of-players-section" class="form-select form-select-sm" aria-label="number of players selection">
                                <option selected>Select a option</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="room-name-input" class="col-form-label">Room Name</label>
                            <input class="form-control" id="room-name-input"></input>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="private-room-checkbox">
                            <label class="form-check-label" for="private-room-checkbox">Private Room<br><p>Private rooms do not appear in global search and can only be accessed by code.</p></label>
                        </div>
                        <div class="modal-footer mb-3">
                            <button type="submit" style="width: 100vw;" class="h-100 btn btn-dark">Create The Room</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        async function createRoom(event) {
            event.preventDefault();
            await CreateRoomAsync(event, document, window)
        }

        window.onload = function() {
            redirectIfuserIsActived(document, window)
            renderHeader(document)
        }
        
        function updateNumberOfPlayersOptions() {
            const gameTypeSelect = document.getElementById("game-type-section");
            const playersSelect = document.getElementById("number-of-players-section");

            playersSelect.innerHTML = '<option selected>Select a option</option>';

            const selectedGameType = gameTypeSelect.value;

            let options = [];
            if (selectedGameType === "0") {
                options = [2, 4];
            } else if (selectedGameType === "1") {
                options = [4, 8, 12, 16];
            }

            options.forEach(optionValue => {
                const optionElement = document.createElement("option");
                optionElement.value = optionValue;
                optionElement.textContent = optionValue;
                playersSelect.appendChild(optionElement);
            });
        }
    </script>
</body>
</html>